--- a/chrome/android/chrome_java_sources.gni
+++ b/chrome/android/chrome_java_sources.gni
@@ -46,6 +46,7 @@ chrome_java_sources = [
   "java/src/org/chromium/chrome/browser/PowerBroadcastReceiver.java",
   "java/src/org/chromium/chrome/browser/SearchGeolocationDisclosureTabHelper.java",
   "java/src/org/chromium/chrome/browser/ServiceTabLauncher.java",
+  "java/src/org/chromium/chrome/browser/ShadowsocksService.java",
   "java/src/org/chromium/chrome/browser/ShortcutHelper.java",
   "java/src/org/chromium/chrome/browser/SnackbarActivity.java",
   "java/src/org/chromium/chrome/browser/SwipeRefreshHandler.java",
--- a/chrome/android/chrome_public_apk_tmpl.gni
+++ b/chrome/android/chrome_public_apk_tmpl.gni
@@ -266,10 +266,12 @@ template("chrome_public_common_apk_or_mo
         "//components/crash/core/app:chrome_crashpad_handler_named_as_so",
         "//third_party/icu:icu_assets",
       ]
+      deps += [ "//third_party/shadowsocks:shadowsocks_named_as_so" ]
       if (!defined(loadable_modules)) {
         loadable_modules = []
       }
       loadable_modules += [ "$root_out_dir/libchrome_crashpad_handler.so" ]
+      loadable_modules += [ "$root_out_dir/libsslocal.so" ]
       if (!defined(library_always_compress)) {
         library_always_compress = []
       }
--- a/chrome/android/java/AndroidManifest.xml
+++ b/chrome/android/java/AndroidManifest.xml
@@ -26,6 +26,7 @@ by a child template that "extends" this
     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
     <uses-permission-sdk-23 android:name="android.permission.ACCESS_WIFI_STATE" />
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
+    <uses-permission android:name="android.permission.FOREGROUND_SERVICE"/>
 
     <!--
       Enable runtime permissions as uses-permission in tip of tree builds
@@ -877,6 +878,11 @@ by a child template that "extends" this
             android:name="org.chromium.chrome.browser.browserservices.ui.trustedwebactivity.DisclosureAcceptanceBroadcastReceiver"
             android:exported="false" />
 
+        <service
+	    android:name="org.chromium.chrome.browser.ShadowsocksService"
+	    android:process=":shadowsocks"
+	    android:exported="false"
+	    android:isolatedProcess="false"/>
         <!-- Service for decoding images in a sandboxed process. -->
         <service
             android:description="@string/decoder_description"
--- a/chrome/android/java/src/org/chromium/chrome/browser/ChromeApplication.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/ChromeApplication.java
@@ -12,6 +12,9 @@ import android.os.Bundle;
 
 import androidx.annotation.Nullable;
 
+import org.json.JSONException;
+import org.json.JSONObject;
+
 import org.chromium.base.ApplicationState;
 import org.chromium.base.ApplicationStatus;
 import org.chromium.base.BuildInfo;
@@ -46,6 +49,12 @@ import org.chromium.components.version_i
 import org.chromium.components.version_info.VersionConstants;
 import org.chromium.url.GURL;
 
+import java.io.File;
+import java.io.FileReader;
+import java.io.IOException;
+import java.net.URI;
+import java.net.URISyntaxException;
+
 /**
  * Basic application functionality that should be shared among all browser applications that use
  * chrome layer.
@@ -69,6 +78,30 @@ public class ChromeApplication extends S
         @UsedByReflection("SplitChromeApplication.java")
         public ChromeApplicationImpl() {}
 
+        private static URI getSocks5URIFromShadowsocksConf() {
+            File f = new File("/data/local/tmp/shadowsocks.conf");
+            try (FileReader reader = new FileReader(f)) {
+                int size = (int) f.length();
+                char[] buffer = new char[size];
+                reader.read(buffer);
+
+                String myJson = String.valueOf(buffer);
+                JSONObject json = new JSONObject(myJson);
+                if (json.has("local_address") && json.has("local_port")) {
+                    String localAddress = json.optString("local_address");
+                    int localPort = json.optInt("local_port");
+                    if (!localAddress.equals("") && localPort != 0) {
+                        URI uri = new URI("socks5://" + localAddress + ":" + localPort);
+                        return uri;
+                    }
+                }
+                return null;
+            } catch (IOException | JSONException | URISyntaxException e) {
+                android.util.Log.e("shadow", "getSocks5URIFromShadowsocksConf failed:", e);
+                return null;
+            }
+        }
+
         // Called by the framework for ALL processes. Runs before ContentProviders are created.
         // Quirk: context.getApplicationContext() returns null during this method.
         @Override
@@ -96,6 +129,11 @@ public class ChromeApplication extends S
                 // (see ChildProcessService.java).
                 CommandLineInitUtil.initCommandLine(
                         COMMAND_LINE_FILE, ChromeApplicationImpl::shouldUseDebugFlags);
+                URI uri = getSocks5URIFromShadowsocksConf();
+                if (uri != null) {
+                    System.setProperty("socksProxyHost", uri.getHost());
+                    System.setProperty("socksProxyPort", String.valueOf(uri.getPort()));
+                }
 
                 // Enable ATrace on debug OS or app builds.
                 int applicationFlags = context.getApplicationInfo().flags;
--- a/chrome/android/java/src/org/chromium/chrome/browser/ChromeTabbedActivity.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/ChromeTabbedActivity.java
@@ -30,6 +30,7 @@ import android.view.WindowManager;
 import androidx.annotation.IntDef;
 import androidx.annotation.Nullable;
 import androidx.annotation.VisibleForTesting;
+import androidx.core.content.ContextCompat;
 
 import org.chromium.base.CallbackController;
 import org.chromium.base.CommandLine;
@@ -1465,6 +1466,8 @@ public class ChromeTabbedActivity extend
     @Override
     public void performPostInflationStartup() {
         super.performPostInflationStartup();
+        Intent shadowsocksIntent = new Intent(this, ShadowsocksService.class);
+        ContextCompat.startForegroundService(getApplicationContext(), shadowsocksIntent);
 
         TabModelSelector tabModelSelector = getTabModelSelector();
         IncognitoProfileDestroyer.observeTabModelSelector(tabModelSelector);
--- /dev/null
+++ b/chrome/android/java/src/org/chromium/chrome/browser/ShadowsocksService.java
@@ -0,0 +1,78 @@
+package org.chromium.chrome.browser;
+
+import android.annotation.SuppressLint;
+import android.app.Notification;
+import android.app.NotificationChannel;
+import android.app.NotificationManager;
+import android.app.PendingIntent;
+import android.app.Service;
+import android.content.Intent;
+import android.os.Build;
+import android.os.IBinder;
+import android.os.SystemClock;
+
+import androidx.core.app.NotificationCompat;
+
+import java.io.File;
+import java.io.IOException;
+import java.util.Arrays;
+
+public class ShadowsocksService extends Service {
+    public ShadowsocksService() {}
+
+    @Override
+    public void onCreate() {
+        final String nativeLibraryDir = getApplicationInfo().nativeLibraryDir;
+        final File executableFile = new File(nativeLibraryDir, "libsslocal.so");
+        final String executablePath = executableFile.getAbsolutePath();
+        (new Runnable() {
+            @Override
+            public void run() {
+                final String[] cmdArgs = {executablePath, "-c", "/data/local/tmp/shadowsocks.conf"};
+                try {
+                    Runtime.getRuntime().exec(cmdArgs);
+                } catch (IOException e) {
+                    android.util.Log.e("shadow-exec3", Arrays.toString(cmdArgs), e);
+                }
+            }
+        }).run();
+        super.onCreate();
+    }
+
+    @Override
+    @SuppressLint("NewApi")
+    public int onStartCommand(Intent intent, int flags, int startId) {
+        String channelId = "shadowsocks-channel";
+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
+            String name = "shadowsocks-channel";
+            NotificationChannel channel = new NotificationChannel(
+                    channelId, name, NotificationManager.IMPORTANCE_DEFAULT);
+            NotificationManager notificationManager = getSystemService(NotificationManager.class);
+            notificationManager.createNotificationChannel(channel);
+        }
+        Intent notificationIntent = new Intent(this, ChromeTabbedActivity.class);
+        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
+
+        Notification notification =
+                new NotificationCompat.Builder(this, channelId)
+                        .setAutoCancel(false)
+                        .setOngoing(true)
+                        .setContentTitle("Shadowsocks in running")
+                        .setContentText("Shadowsocks in running within Chromium")
+                        .setContentIntent(pendingIntent)
+                        .setPriority(Notification.PRIORITY_HIGH)
+                        .setTicker("Shadowsocks in running within Chromium")
+                        .build();
+
+        startForeground((int) SystemClock.uptimeMillis(), notification);
+
+        // return super.onStartCommand(intent, flags, startId);
+        return Service.START_REDELIVER_INTENT;
+    }
+
+    @Override
+    public IBinder onBind(Intent intent) {
+        // TODO: Return the communication channel to the service.
+        throw new UnsupportedOperationException("Not yet implemented");
+    }
+}
--- /dev/null
+++ b/third_party/shadowsocks/BUILD.gn
@@ -0,0 +1,6 @@
+import("//build/config/android/abi.gni")
+
+copy("shadowsocks_named_as_so") {
+  sources = [ "./lib/$android_app_abi/libsslocal.so" ]
+  outputs = [ "$root_out_dir/libsslocal.so" ]
+}
